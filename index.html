<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nushape</title>
  <link rel="stylesheet" href="style.css">
  <link rel="shortcut icon" href="assets/favicon.svg" type="image/x-icon">
  <script>
    (function () {
      window.__pendingNavigateQueue = [];
      const fallbackNavigate = function (page) {
        if (typeof window.__navigateHandler === 'function') {
          window.__navigateHandler(page);
        } else {
          window.__pendingNavigateQueue.push(page);
        }
      };
      window.navigateTo = window.navigateTo || fallbackNavigate;
    })();
  </script>
</head>

<body>
  <div class="header">
    <div class="header-content">
      <div class="header-left">
        <button class="menu-toggle" onclick="toggleMenu()">
          <div class="hamburger">
            <span></span><span></span><span></span>
          </div>
        </button>
        <div class="logo" onclick="navigateTo('dashboard')">
          <img src="assets/logo.svg" alt="Logo Nushape" style="height: 36px; vertical-align: middle;">
          <span> — Seu treinador pessoal inteligente</span>
        </div>
      </div>
      <div class="header-actions">
        <button type="button" class="button-secondary" id="authTrigger">Entrar</button>
      </div>
    </div>
  </div>

  <div class=" sidebar-overlay" onclick="toggleMenu()">
  </div>

  <div class="container">
    <aside class="sidebar">
      <div class="filter-section">
        <div class="filter-title">NAVEGAÇÃO</div>

        <button class="sidebar-item active" data-page="dashboard" onclick="navigateTo('dashboard')">
          <span>🏠</span><span>Dashboard</span>
        </button>
        <button class="sidebar-item" data-page="treinos" onclick="navigateTo('treinos')">
          <span>📝</span><span>Meus Treinos</span>
        </button>
        <button class="sidebar-item" data-page="exercicios" onclick="navigateTo('exercicios')">
          <span>🏋️</span><span>Exercícios</span>
        </button>
        <button class=" sidebar-item" data-page="progresso" onclick="navigateTo('progresso')">
          <span>📊</span><span>Progresso</span>
        </button>
        <button class="sidebar-item" data-page="sessao" onclick="navigateTo('sessao')">
          <span>⚡</span><span>Sessão do Dia</span>
        </button>
        <button class="sidebar-item" data-page="biblioteca" onclick="navigateTo('biblioteca')">
          <span>📖</span><span>Biblioteca de Treinos</span>
        </button>
        <button class="sidebar-item" data-page="dados" onclick="navigateTo('dados')">
          <span>👤</span><span>Meus Dados</span>
        </button>
      </div>

      <div class="filter-section fases"></div>

    </aside>

    <main id="mainContent" class="main" tabindex="-1">
      <!-- PÁGINA: LOGIN -->
      <div id="page-login" class="page auth-page">
        <div class="auth-shell">
          <header class="auth-header">
            <div class="auth-logo">
              <img src="assets/logo.svg" alt="Logo Nushape">
              <span>— Seu treinador pessoal inteligente</span>
            </div>
          </header>

          <main class="auth-main">
            <div class="auth-card">
              <div id="loginView" class="auth-view active" aria-hidden="false">
                <h2>Entrar no sistema</h2>
                <p>Insira as suas credenciais para continuar a sua evolução.</p>

                <form id="loginForm" class="auth-form">
                  <div class="auth-group">
                    <label for="login-email" class="auth-label">E-mail</label>
                    <div class="auth-input">
                      <span class="auth-icon">✉️</span>
                      <input type="email" id="login-email" required placeholder="exemplo@email.com" class="auth-field">
                    </div>
                  </div>

                  <div class="auth-group">
                    <div class="auth-row">
                      <label for="login-password" class="auth-label">Senha</label>
                      <button type="button" class="auth-link" data-auth-reset>Esqueceu a senha?</button>
                    </div>
                    <div class="auth-input">
                      <span class="auth-icon">🔒</span>
                      <input type="password" id="login-password" required placeholder="Sua senha" class="auth-field">
                      <button type="button" class="auth-toggle" data-toggle-password aria-label="Mostrar senha">👁️</button>
                    </div>
                  </div>

                  <button type="submit" class="auth-submit">
                    <span class="auth-submit-text">Entrar</span>
                    <span class="auth-spinner" aria-hidden="true"></span>
                  </button>
                </form>

                <div class="auth-switch">
                  Novo no Nushape?
                  <button type="button" class="auth-link" data-auth-switch="register">Criar conta agora</button>
                </div>
              </div>

              <div id="registerView" class="auth-view" aria-hidden="true">
                <h2>Criar sua conta</h2>
                <p>Comece hoje o seu plano de treino personalizado.</p>

                <form id="registerForm" class="auth-form">
                  <div class="auth-group">
                    <label for="reg-name" class="auth-label">Nome completo</label>
                    <div class="auth-input">
                      <span class="auth-icon">👤</span>
                      <input type="text" id="reg-name" required placeholder="Como devemos chamar você?" class="auth-field">
                    </div>
                  </div>

                  <div class="auth-group">
                    <label for="reg-email" class="auth-label">E-mail</label>
                    <div class="auth-input">
                      <span class="auth-icon">✉️</span>
                      <input type="email" id="reg-email" required placeholder="seu@email.com" class="auth-field">
                    </div>
                  </div>

                  <div class="auth-group">
                    <label for="reg-password" class="auth-label">Escolha uma senha</label>
                    <div class="auth-input">
                      <span class="auth-icon">🔒</span>
                      <input type="password" id="reg-password" required placeholder="Mínimo 8 caracteres" class="auth-field">
                      <button type="button" class="auth-toggle" data-toggle-password aria-label="Mostrar senha">👁️</button>
                    </div>
                  </div>

                  <div class="auth-group">
                    <label for="reg-confirm" class="auth-label">Confirmar senha</label>
                    <div class="auth-input">
                      <span class="auth-icon">✅</span>
                      <input type="password" id="reg-confirm" required placeholder="Repita a senha" class="auth-field">
                      <button type="button" class="auth-toggle" data-toggle-password aria-label="Mostrar senha">👁️</button>
                    </div>
                  </div>

                  <button type="submit" class="auth-submit">
                    <span class="auth-submit-text">Começar evolução</span>
                    <span class="auth-spinner" aria-hidden="true"></span>
                  </button>
                </form>

                <div class="auth-switch">
                  Já tem uma conta?
                  <button type="button" class="auth-link" data-auth-switch="login">Fazer login</button>
                </div>
              </div>

              <div id="confirmView" class="auth-view" aria-hidden="true">
                <h2>Confirme seu e-mail</h2>
                <p>Enviamos um link de confirmação para <strong id="confirmEmail">seu e-mail</strong>. Clique no link para ativar sua conta e fazer login.</p>

                <div class="auth-confirm-actions">
                  <button type="button" class="auth-submit" data-auth-switch="login">
                    <span class="auth-submit-text">Ir para login</span>
                    <span class="auth-spinner" aria-hidden="true"></span>
                  </button>
                  <button type="button" class="auth-link auth-resend" data-auth-resend>
                    Reenviar email de confirmação
                  </button>
                </div>
              </div>

              <span id="authFeedback" class="auth-feedback" role="status"></span>
            </div>

            <div class="auth-security">
              <span>🔐 Dados protegidos por criptografia de ponta</span>
            </div>
          </main>

          <footer class="auth-footer">
            &copy; <span id="authYear"></span> Nushape — Inteligência aplicada ao treinamento físico.
          </footer>
        </div>
      </div>
      <!-- PÁGINA: DASHBOARD -->
      <div id="page-dashboard" class="page active">
        <div class="info-card">
          <div class="page-header">
            <div>
              <h2 class="search-title" id="dashboardGreeting">Dashboard</h2>
              <p id="dashboardSubtext">Seu resumo rápido de treinos, avaliações e próximos passos.</p>
            </div>
            <div class="page-header-actions">
              <button class="button-primary btn-create-workout dashboard-card-btn" data-open-workout-modal>
                Montar treino
                <span class="icon">+</span>
              </button>
              <button type="button" class="button-secondary explorar" onclick="navigateTo('exercicios')">Explorar exercícios</button>
            </div>
          </div>

          <div class="stats-grid" id="dashboardStats">
            <div class="stat-card">
              <h3>Treinos salvos</h3>
              <div class="value" id="dashWorkoutsCount">0</div>
            </div>
            <div class="stat-card">
              <h3>Exercícios selecionados</h3>
              <div class="value" id="dashSelectedCount">0</div>
            </div>
            <div class="stat-card">
              <h3>Avaliações físicas</h3>
              <div class="value" id="dashEvaluationCount">0</div>
            </div>
            <div class="stat-card">
              <h3>Séries no último treino</h3>
              <div class="value" id="dashLastVolume">0</div>
            </div>
          </div>
        </div>

        <div class="dashboard-bento">
          <section class="progress-card dashboard-card chart-card">
            <div class="progress-card-header">
              <div>
                <h3>Evolução física</h3>
                <p>Peso e % gordura ao longo do tempo.</p>
              </div>
              <span class="chip chip-soon">Histórico</span>
            </div>
            <div id="dashboardChartEmpty" class="empty-state small" style="display:none;">
              <div class="empty-icon">📉</div>
              <p style="font-size:15px; font-weight:500;">Sem avaliações registradas</p>
              <p style="font-size:13px; color:var(--muted); margin-top:6px;">Registre sua avaliação para ver o gráfico.</p>
            </div>
            <div class="chart-area" id="dashboardChartArea">
              <canvas id="dashboardChart" height="260"></canvas>
            </div>
          </section>
          <section class="progress-card dashboard-card steps-card">
            <div class="progress-card-header">
              <div>
                <h3>Próximos passos</h3>
                <p>Melhore seu plano com estas ações rápidas.</p>
              </div>
              <span class="chip chip-soon">Sugestões</span>
            </div>
            <ul class="dashboard-list" id="dashboardNextSteps"></ul>
          </section>
          <section class="progress-card dashboard-card">
            <div class="progress-card-header">
              <div>
                <h3>Última avaliação</h3>
                <p>Acompanhe medidas e evolução.</p>
              </div>
              <button type="button" class="button-primary button-primary--sm" data-open-evaluation>
                Nova avaliação
                <span class="button-icon">+</span>
              </button>
            </div>
            <div id="dashboardEvaluationEmpty" class="empty-state small" style="display:none;">
              <div class="empty-icon">📈</div>
              <p style="font-size:15px; font-weight:500;">Nenhuma avaliação registrada</p>
              <p style="font-size:13px; color:var(--muted); margin-top:6px;">Crie uma avaliação para acompanhar seu shape.</p>
            </div>
            <div id="dashboardEvaluationSummary" class="last-eval-grid"></div>
          </section>


        </div>

        <div class="dashboard-bento-bottom">
          <section class="progress-card dashboard-card">
            <div class="progress-card-header">
              <div>
                <h3>Último treino criado</h3>
                <p>Resumo do treino mais recente para você retomar rápido.</p>
              </div>
              <button type="button" class="button-secondary" onclick="navigateTo('treinos')">Ver treinos</button>
            </div>
            <div id="dashboardLastWorkoutEmpty" class="empty-state small" style="display:none;">
              <div class="empty-icon">🧩</div>
              <p style="font-size:15px; font-weight:500;">Nenhum treino criado ainda</p>
              <p style="font-size:13px; color:var(--muted); margin-top:6px;">Monte seu primeiro treino para ver o resumo aqui.</p>
            </div>
            <div id="dashboardLastWorkout"></div>
          </section>
          <section class="progress-card dashboard-card profile-card">
            <div class="progress-card-header">
              <div>
                <h3>Resumo do perfil</h3>
                <p>Seus dados pessoais usados para personalização.</p>
              </div>
              <button type="button" class="button-secondary" onclick="navigateTo('dados')">Editar dados</button>
            </div>
            <div id="dashboardProfileSummary" class="last-eval-grid"></div>
          </section>

        </div>
      </div>

      <!-- PÁGINA: SESSÃO DO DIA -->
      <div id="page-sessao" class="page">
        <div class="info-card">
          <div class="page-header">
            <div>
              <h2 class="search-title">Sessão do Dia ⚡</h2>
              <p>Escolha o treino e registre carga e repetições para acompanhar sua evolução.</p>
            </div>
            <div class="page-header-actions">
              <button type="button" class="button-secondary" onclick="navigateTo('treinos')">Ver treinos</button>
            </div>
          </div>

          <div class="form-section session-config">
            <h3>Configurar sessão</h3>
            <div class="form-grid">
              <label class="form-field">
                <span>Treino</span>
                <select id="sessionWorkoutSelect"></select>
              </label>
              <label class="form-field">
                <span>Dia</span>
                <select id="sessionDaySelect"></select>
              </label>
              <label class="form-field">
                <span>Data</span>
                <input type="date" id="sessionDateInput">
              </label>
            </div>
            <p id="sessionSummary" class="session-summary"></p>
          </div>
        </div>

        <div class="info-card" style="margin-top: 28px;">
          <div id="sessionEmpty" class="empty-state small" style="display:none;">
            <div class="empty-icon">🧩</div>
            <p style="font-size:15px; font-weight:500;">Nenhum treino disponível</p>
            <p style="font-size:13px; color:var(--muted); margin-top:6px;">Crie um treino para começar a registrar suas sessões.</p>
          </div>
          <div id="sessionContent">
            <div id="sessionExercises" class="session-exercises"></div>
            <div class="workout-step-actions">
              <span></span>
              <button type="button" class="button-primary" id="saveSessionBtn">Salvar sessão</button>
            </div>
            <div id="sessionFeedback" class="form-feedback" role="status"></div>
          </div>
        </div>
      </div>

      <!-- PÁGINA: BIBLIOTECA DE TREINOS -->
      <div id="page-biblioteca" class="page">
        <div class="info-card">
          <div class="page-header">
            <div>
              <h2 class="search-title">Biblioteca de Treinos 🏆</h2>
              <p>Treinos inspirados em atletas do fisiculturismo mundial e brasileiro.</p>
            </div>
            <div class="page-header-actions">
              <button type="button" class="button-secondary" onclick="navigateTo('treinos')">Ir para meus treinos</button>
            </div>
          </div>

          <div class="library-controls">
            <div class="search-input-wrapper">
              <img src="assets/icons/lupa.svg" class="search-icon">
              <label for="librarySearch" class="sr-only">Buscar treinos</label>
              <input type="text" class="search-input" id="librarySearch" placeholder="Buscar atleta, foco ou divisão...">
            </div>
            <div class="pill-options" id="libraryFilters">
              <button type="button" data-filter="all" class="is-selected">Todos</button>
              <button type="button" data-filter="world">Mundial</button>
              <button type="button" data-filter="br">Brasil</button>
              <button type="button" data-filter="special">Especialização</button>
            </div>
          </div>

          <div class="library-featured" id="libraryFeatured"></div>
        </div>

        <div class="info-card">
          <div class="library-grid" id="libraryGrid"></div>
          <div id="libraryEmpty" class="empty-state small" style="display:none;">
            <div class="empty-icon">📚</div>
            <p style="font-size:15px; font-weight:500;">Nenhum treino encontrado</p>
            <p style="font-size:13px; color:var(--muted); margin-top:6px;">Tente ajustar a busca ou os filtros.</p>
          </div>
        </div>
      </div>

      <!-- PÁGINA: EXERCÍCIOS -->
      <div id="page-exercicios" class="page">
        <div class="search-card">
          <div class="search-header">
            <h2 class="search-title">Buscar Exercícios</h2>
          </div>

          <div class="search-controls">
            <div class="search-input-wrapper">
              <img src="assets/icons/lupa.svg" class="search-icon">
              <label for="searchInput" class="sr-only">Buscar exercícios</label>
              <input type="text" class="search-input" id="searchInput" placeholder="Digite o nome do exercício...">
            </div>

            <div class="select-wrapper">
              <label for="muscleSelect" class="sr-only">Filtrar por grupo muscular</label>
              <select class="custom-select" id="muscleSelect">
                <option value="Todos">Todos os Grupos</option>
                <option value="Peitoral">Peitoral</option>
                <option value="Costas">Costas</option>
                <option value="Pernas">Pernas</option>
                <option value="Posterior">Posterior</option>
                <option value="Ombros">Ombros</option>
                <option value="Bíceps">Bíceps</option>
                <option value="Tríceps">Tríceps</option>
                <option value="Glúteos">Glúteos</option>
                <option value="Abdômen">Abdômen</option>
                <option value="Panturrilhas">Panturrilhas</option>
                <option value="Trapézio">Trapézio</option>
                <option value="Antebraços">Antebraços</option>
              </select>
              <span class="select-arrow">➔</span>
            </div>
          </div>

          <div id="metricsContainer" style="display: none;">
            <div class="metrics-grid" id="metricsGrid"></div>
          </div>
        </div>

        <div class="results-header">
          <h2 class="results-title">Selecione os Exercícios que você gostaria que estivesse no seu treino! 🏋️</h2>
          <span class="results-count" id="resultsCount">0 exercícios selecionados</span>
        </div>

        <div id="results" class="exercise-grid"></div>
      </div>

      <!-- PÁGINA: MEUS TREINOS -->
      <div id="page-treinos" class="page">
        <div class="info-card">
          <div class="create-workout-cta">
            <div>
              <p class="cta-kicker">Assistente Inteligente</p>
              <h2>Monte treinos personalizados automaticamente</h2>
              <p>Defina seus parâmetros e o Nushape cria sequências equilibradas considerando volume, variedade e equipamentos.</p>
              <button class="button-primary btn-create-workout" data-open-workout-modal>
                <span>Criar novo treino </span><span class="icon">+</span>
              </button>
              <div class="cta-stats">
                <div>
                  <span style="font-weight: 500; color: var(--text);">Treinos salvos</span>
                  <strong id="workoutCount">0</strong>
                </div>
                <div>
                  <span style="font-weight: 500; color: var(--text);">Exercícios selecionados</span>
                  <strong id="selectedCountTreinos">0</strong>
                </div>
              </div>
            </div>

          </div>
        </div>

        <div class="info-card workout-list-card">
          <div class="workout-list-header">
            <div>
              <h3>Seus treinos</h3>
              <p>Selecione um treino para visualizar detalhes ou crie um novo para a próxima semana.</p>
            </div>
            <button class="button-secondary" data-open-workout-modal>Montar treino</button>
          </div>

          <div id="workoutList" class="workout-list"></div>
          <div id="workoutEmptyState" class="empty-state small">
            <div class="empty-icon">📄</div>
            <p style="font-weight: 600;">Nenhum treino criado ainda</p>
            <p style="font-size: 13px; color: var(--muted); margin-top: 6px;">Clique em “Criar novo treino” para começar.</p>
          </div>
        </div>

        <div class="info-card workout-details-card" id="workoutDetails" style="display:none;">
          <div class="workout-details-header">
            <div>
              <h3 id="workoutDetailsTitle"></h3>
              <p id="workoutDetailsMeta" style="color: var(--muted); margin-top: 4px;"></p>
            </div>
            <div class="details-actions">
              <button type="button" class="icon-square-button" data-edit-workout aria-label="Renomear treino">
                <img src="assets/icons/botao-editar.png" alt="" width="20" height="20">
              </button>
              <button type="button" class="icon-square-button danger" data-delete-workout aria-label="Excluir treino">
                <img src="assets/icons/lixeira-de-reciclagem.png" alt="" width="20" height="20">
              </button>
              <button type="button" class="button-secondary" data-export-workout>Exportar PDF</button>
              <button class="button-outline" id="closeDetailsBtn">Fechar</button>
            </div>
          </div>
          <div id="workoutDetailsBody"></div>
        </div>
      </div>

      <!-- PÁGINA: PROGRESSO -->
      <div id="page-progresso" class="page">
        <div class="info-card">
          <div class="page-header">
            <div>
              <h2 class="search-title">Meu Progresso 📊</h2>
              <p>Acompanhe sua evolução dos treinos e do shape em um só lugar.</p>
            </div>
          </div>

          <div class="progress-grid">
            <section class="progress-card">
              <div class="progress-card-header">
                <div>
                  <h3>Força por exercício</h3>
                  <p>Veja se houve evolução nas cargas e repetições.</p>
                </div>
              </div>

              <div class="form-field">
                <span>Filtrar exercício</span>
                <select id="strengthExerciseSelect"></select>
              </div>
              <div class="pill-options" id="strengthChartMode">
                <button type="button" data-mode="weight" class="is-selected">Peso</button>
                <button type="button" data-mode="strength">Peso × Reps (força)</button>
              </div>

              <div id="strengthChartEmpty" class="empty-state small" style="display:none;">
                <div class="empty-icon">📈</div>
                <p style="font-size:15px; font-weight:500;">Sem registros suficientes</p>
                <p style="font-size:13px; color:var(--muted); margin-top:6px;">Registre sessões para ver o gráfico de força.</p>
              </div>
              <div class="chart-area" id="strengthChartArea">
                <canvas id="strengthChart" height="220"></canvas>
              </div>
            </section>

            <section class="progress-card">
              <div class="progress-card-header">
                <div>
                  <h3>Evolução Corporal</h3>
                  <p>Visualize o histórico das avaliações físicas registradas.</p>
                </div>
                <button type="button" class="button-primary button-primary--sm" data-open-evaluation>
                  Nova avaliação
                  <span class="button-icon">+</span>
                </button>
              </div>

              <div id="shapeEmptyState" class="empty-state small" style="display:none;">
                <div class="empty-icon">📈</div>
                <p style="font-size:15px; font-weight:500;">Ainda não temos nenhuma avaliação física</p>
                <p style="font-size:13px; color:var(--muted); margin-top:6px;">Registre sua primeira avaliação para começar a acompanhar sua evolução.</p>
              </div>

              <div id="shapeRecords" class="records-grid"></div>
            </section>
          </div>
        </div>
      </div>

      <!-- PÁGINA: MEUS DADOS -->
      <div id="page-dados" class="page">
        <div class="info-card">
          <div class="page-header">
            <div>
              <h2 class="search-title">Meus Dados 👤</h2>
              <p>Atualize suas informações pessoais e acompanhe suas avaliações físicas.</p>
            </div>
            <div class="page-header-actions">
              <span id="profileFeedback" class="form-feedback" role="status"></span>
              <button type="submit" form="profileForm" class="button-primary btn-save">Salvar alterações</button>
              <button type="button" class="button-primary" data-open-evaluation>
                Registrar avaliação
                <span class="button-icon">+</span>
              </button>
            </div>
          </div>

          <div class="dados-layout">
            <div class="dados-main">
              <form id="profileForm" class="profile-form">
                <section class="form-section">
                  <h3>Informações pessoais</h3>
                  <div class="form-grid dados-grid">
                    <label class="form-field">
                      <span>Nome completo</span>
                      <input type="text" id="profileName" name="name" placeholder="Digite seu nome completo" autocomplete="name">
                    </label>
                    <label class="form-field">
                      <span>Celular</span>
                      <input type="tel" id="profilePhone" name="phone" placeholder="(16) 99999-9999" autocomplete="tel">
                    </label>
                    <label class="form-field">
                      <span>Data de nascimento</span>
                      <input type="date" id="profileBirthdate" name="birthdate" max="9999-12-31">
                    </label>
                    <label class="form-field">
                      <span>E-mail</span>
                      <input type="email" id="profileEmail" name="email" placeholder="voce@email.com" autocomplete="email" readonly aria-readonly="true">
                    </label>
                  </div>

                  <div class="form-grid dados-grid">
                    <div class="form-field">
                      <span>Gênero</span>
                      <div class="radio-group">
                        <label class="radio-inline">
                          <input type="radio" name="gender" value="masculino">
                          <span>Masculino</span>
                        </label>
                        <label class="radio-inline">
                          <input type="radio" name="gender" value="feminino">
                          <span>Feminino</span>
                        </label>
                        <label class="radio-inline">
                          <input type="radio" name="gender" value="outro">
                          <span>Outro</span>
                        </label>
                      </div>
                    </div>

                    <div class="form-field">
                      <span>Biotipo</span>
                      <div class="radio-group">
                        <label class="radio-inline">
                          <input type="radio" name="biotype" value="ectomorfo">
                          <span>Ectomorfo</span>
                        </label>
                        <label class="radio-inline">
                          <input type="radio" name="biotype" value="mesomorfo">
                          <span>Mesomorfo</span>
                        </label>
                        <label class="radio-inline">
                          <input type="radio" name="biotype" value="endomorfo">
                          <span>Endomorfo</span>
                        </label>
                      </div>
                    </div>
                  </div>

                  <div class="dados-card dados-status">
                    <div class="dados-card-header">
                      <div>
                        <h3>Status da conta</h3>
                        <p>Acompanhe sua sincronização com a nuvem.</p>
                      </div>
                      <span class="chip chip-positive" id="profileSyncStatus">Sincronizando</span>
                    </div>
                    <div class="dados-card-list">
                      <div>
                        <span>Última sincronização</span>
                        <strong id="profileSyncTime">—</strong>
                      </div>
                      <div>
                        <span>Conta conectada</span>
                        <strong id="profileSyncEmail">—</strong>
                      </div>
                    </div>
                  </div>
                </section>

                <section class="form-section">
                  <h3>Última Avaliação Física</h3>
                  <div id="lastEvaluationCard" class="last-evaluation-card">
                    <p class="empty-text">Você ainda não registrou nenhuma avaliação física.</p>
                  </div>
                </section>

                <section class="form-section">
                  <h3>Segurança da conta</h3>
                  <div class="form-grid">
                    <label class="form-field">
                      <span>Nova senha</span>
                      <input type="password" id="profilePassword" name="newPassword" placeholder="Digite a nova senha">
                    </label>
                    <label class="form-field">
                      <span>Confirmar nova senha</span>
                      <input type="password" id="profilePasswordConfirm" name="confirmPassword" placeholder="Repita a nova senha">
                    </label>
                  </div>
                  <p class="dados-hint">A senha é atualizada na sua conta do Supabase.</p>

                  <div class="danger-zone">
                    <div>
                      <h4>Excluir conta</h4>
                      <p>Essa ação remove sua conta e todos os dados associados. Não é possível desfazer.</p>
                    </div>
                    <button type="button" class="button-danger" id="deleteAccountBtn">Excluir conta</button>
                  </div>
                </section>
              </form>
            </div>

            <aside class="dados-side"></aside>
          </div>
        </div>
      </div>
    </main>
  </div>

  <div id="evaluationModal" class="modal-overlay" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="evaluationTitle">
    <div class="modal-card">
      <div class="modal-header">
        <div>
          <h3 id="evaluationTitle">Registrar avaliação física</h3>
          <p>Preencha suas medidas para acompanhar a evolução do shape.</p>
        </div>
        <button type="button" class="modal-close" data-close-modal aria-label="Fechar modal">×</button>
      </div>

      <form id="evaluationForm" class="modal-form">
        <div class="form-grid">
          <label class="form-field">
            <span>Altura (cm)</span>
            <input type="number" name="height" min="0" step="0.1" placeholder="ex: 178">
          </label>
          <label class="form-field">
            <span>Cintura (cm)</span>
            <input type="number" name="waist" min="0" step="0.1" placeholder="ex: 82">
          </label>
          <label class="form-field">
            <span>Pescoço (cm)</span>
            <input type="number" name="neck" min="0" step="0.1" placeholder="ex: 38">
          </label>
          <label class="form-field">
            <span>Peso (kg)</span>
            <input type="number" name="weight" min="0" step="0.1" placeholder="ex: 82.5">
          </label>
          <label class="form-field">
            <span>% de gordura (BF)</span>
            <input type="number" name="bodyFat" min="0" max="70" step="0.1" placeholder="ex: 12.5">
          </label>
          <label class="form-field">
            <span>Data da avaliação</span>
            <input type="date" name="date" required>
          </label>
        </div>

        <div class="modal-actions">
          <button type="button" class="button-outline" data-close-modal>Cancelar</button>
          <button type="submit" class="button-primary button-primary--sm">
            Salvar avaliação
          </button>
        </div>
      </form>
    </div>
  </div>

  <div id="clearDataModal" class="modal-overlay" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="clearDataTitle">
    <div class="modal-card">
      <div class="modal-header">
        <div>
          <h3 id="clearDataTitle">Limpar todos os dados?</h3>
          <p>Essa ação remove exercícios, dados pessoais e avaliações salvos no navegador.</p>
        </div>
        <button type="button" class="modal-close" data-close-clear aria-label="Fechar modal">×</button>
      </div>

      <div class="modal-body">
        <p style="color:var(--muted); font-size:15px; line-height:1.6;">
          Tem certeza de que deseja prosseguir? Essa operação não pode ser desfeita e você perderá todas as informações armazenadas localmente.
        </p>
      </div>

      <div class="modal-actions">
        <button type="button" class="button-outline" data-close-clear>Cancelar</button>
        <button type="button" class="button-danger" data-confirm-clear>Sim, limpar tudo</button>
      </div>
    </div>
  </div>

  <div id="exportModal" class="modal-overlay" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="exportTitle">
    <div class="modal-card export-modal">
      <div class="modal-header">
        <div>
          <h3 id="exportTitle">Exportação pronta</h3>
          <p>Seus dados foram comprimidos. Baixe o arquivo para restaurar depois.</p>
        </div>
        <button type="button" class="modal-close" data-close-export aria-label="Fechar modal">×</button>
      </div>

      <div class="compression-bar">
        <div class="compression-bar-fill" id="compressionBarFill"></div>
      </div>
      <div class="modal-actions-mobile">
        <button type="button" class="button-primary" id="downloadExportBtn" disabled>Baixar arquivo (.nushape)</button>
        <button type="button" class="button-outline" data-close-export>Fechar</button>
      </div>

      <div class="export-metrics">
        <div class="export-metric">
          <span class="label">Tamanho original</span>
          <strong id="exportOriginalSize">-</strong>
        </div>
        <div class="export-metric">
          <span class="label">Tamanho comprimido</span>
          <strong id="exportCompressedSize">-</strong>
        </div>
        <div class="export-metric">
          <span class="label">Economia</span>
          <strong id="exportSavings">-</strong>
        </div>
        <div class="export-metric">
          <span class="label">Tempo de compressão</span>
          <strong id="exportTime">-</strong>
        </div>
        <div class="export-metric">
          <span class="label">Exercícios selecionados</span>
          <strong id="exportSelectedCount">-</strong>
        </div>
        <div class="export-metric">
          <span class="label">Treinos salvos</span>
          <strong id="exportWorkoutCount">-</strong>
        </div>
        <div class="export-metric">
          <span class="label">Avaliações</span>
          <strong id="exportEvaluationCount">-</strong>
        </div>
      </div>

      <p class="export-note">O arquivo gerado terá extensão <strong>.nushape</strong> e inclui seus dados comprimidos.</p>

    </div>
  </div>

  <div id="workoutModal" class="modal-overlay" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="workoutModalTitle">
    <div class="modal-card workout-modal">
      <div class="modal-header">
        <div>
          <h3 id="workoutModalTitle">Criar novo treino</h3>
          <p>Configure os parâmetros e deixe a IA gerar um plano equilibrado.</p>
        </div>
        <button type="button" class="modal-close" data-close-workout aria-label="Fechar modal">×</button>
      </div>

      <div class="workout-stepper" role="tablist" aria-label="Etapas de criação do treino">
        <button type="button" class="step-dot is-active" data-step-target="1" aria-label="Etapa 1 - Configurações">
          <span class="step-index" aria-hidden="true">1</span>
        </button>
        <span class="step-connector" aria-hidden="true"></span>
        <button type="button" class="step-dot" data-step-target="2" aria-label="Etapa 2 - Exercícios">
          <span class="step-index" aria-hidden="true">2</span>
        </button>
        <span class="step-connector" aria-hidden="true"></span>
        <button type="button" class="step-dot" data-step-target="3" aria-label="Etapa 3 - Geração">
          <span class="step-index" aria-hidden="true">3</span>
        </button>
      </div>

      <form id="workoutForm">
        <div class="workout-step is-active" data-step="1">
          <h4>🎯 Configurações básicas</h4>
          <div class="workout-field-group">
            <span>Divisão de treino</span>
            <div class="card-options" id="divisionOptions">
              <label><input type="radio" name="division" value="Bro Split"> Bro Split</label>
              <label><input type="radio" name="division" value="Push / Pull / Legs"> Push / Pull / Legs</label>
              <label><input type="radio" name="division" value="Upper / Lower"> Upper / Lower</label>
              <label><input type="radio" name="division" value="PPL + Upper/Lower"> PPL + Upper/Lower</label>
              <label><input type="radio" name="division" value="Full Body"> Full Body</label>
              <label><input type="radio" name="division" value="Sem Preferência" checked> Sem preferência</label>
            </div>
          </div>

          <div class="workout-field-group">
            <span>Quantos dias por semana?</span>
            <div class="pill-options" id="daysOptions">
              <button type="button" data-value="3">3 dias</button>
              <button type="button" data-value="4">4 dias</button>
              <button type="button" data-value="5">5 dias</button>
              <button type="button" data-value="6">6 dias</button>
            </div>
          </div>

          <div class="workout-field-group">
            <span>Volume semanal</span>
            <div class="card-options" id="volumeOptions">
              <label><input type="radio" name="volume" value="low"> 🔴 Baixo</label>
              <label><input type="radio" name="volume" value="medium" checked> 🟡 Médio</label>
              <label><input type="radio" name="volume" value="high"> 🟢 Alto</label>
              <label><input type="radio" name="volume" value="deload"> 🔵 Deload</label>
            </div>
          </div>

          <div class="workout-step-actions">
            <span></span>
            <button type="button" class="button-primary next" data-action="next">Próximo →</button>
          </div>
        </div>

        <div class="workout-step" data-step="2">
          <h4>💪 Seleção de exercícios</h4>

          <label class="toggle-option">
            <input type="radio" name="exerciseSource" value="ai" checked>
            <span>Deixar o programa escolher por mim</span>
          </label>
          <label class="toggle-option">
            <input type="radio" name="exerciseSource" value="selected">
            <span>Usar exercícios já selecionados</span>
          </label>

          <div class="requirements-card" id="exerciseRequirements"></div>
          <p class="requirement-hint" id="requirementsHint"></p>
          <div class="workout-step-actions">
            <button type="button" class="button-secondary prev" data-action="back">← Voltar</button>
            <button type="button" class="button-primary next" data-action="next">Próximo →</button>
          </div>
        </div>

        <div class="workout-step" data-step="3">
          <h4>⚙️ Montando treino...</h4>
          <div class="generation-progress" id="generationProgress">
            <div class="progress-bar"><span></span></div>
            <ul>
              <li data-task="recovery">Checando equilíbrio muscular</li>
              <li data-task="equipment">Agrupando por equipamento</li>
              <li data-task="ordering">Organizando a ordem do treino</li>
              <li data-task="coloring">Distribuindo exercícios nos dias</li>
            </ul>
          </div>
          <div class="generation-result" id="generationResult" style="display:none;" aria-live="polite"></div>
          <div class="workout-step-actions">
            <button type="button" class="button-secondary prev" data-action="back">← Voltar</button>
            <button type="button" class="button-primary next" id="generateWorkoutBtn">Gerar treino</button>
          </div>
        </div>
      </form>
    </div>
  </div>

  <div id="deleteWorkoutModal" class="modal-overlay" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="deleteWorkoutTitle">
    <div class="modal-card">
      <div class="modal-header">
        <div>
          <h3 id="deleteWorkoutTitle">Excluir treino</h3>
          <p>Essa ação removerá o treino selecionado e todos os dias vinculados.</p>
        </div>
        <button type="button" class="modal-close" data-close-delete-workout aria-label="Fechar modal">×</button>
      </div>
      <div class="modal-body">
        <p style="color: var(--muted);">Tem certeza de que deseja excluir o treino <strong id="deleteWorkoutName"></strong>? Essa ação não pode ser desfeita.</p>
      </div>
      <div class="modal-actions">
        <button type="button" class="button-outline" data-close-delete-workout>Cancelar</button>
        <button type="button" class="button-danger" id="confirmDeleteWorkoutBtn">
          <img src="assets/icons/lixeira-de-reciclagem-branca.png" alt="" width="auto" height="18">
          Excluir treino
        </button>
      </div>
    </div>
  </div>

  <div id="deleteAccountModal" class="modal-overlay" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="deleteAccountTitle">
    <div class="modal-card">
      <div class="modal-header">
        <div>
          <h3 id="deleteAccountTitle">Excluir conta</h3>
          <p>Essa ação remove sua conta e todos os dados associados. Não é possível desfazer.</p>
        </div>
        <button type="button" class="modal-close" data-close-delete-account aria-label="Fechar modal">×</button>
      </div>
      <div class="modal-body">
        <p style="color: var(--muted);">Conta conectada: <strong id="deleteAccountEmail">—</strong></p>
        <div class="form-field" style="margin-top: 16px;">
          <span>Digite NUDELETE-2026 para confirmar</span>
          <input type="text" id="deleteAccountConfirmInput" placeholder="NUDELETE-2026">
        </div>
        <p class="dados-hint">Após a confirmação, seus dados serão removidos do Supabase.</p>
      </div>
      <div class="modal-actions">
        <button type="button" class="button-outline" data-close-delete-account>Cancelar</button>
        <button type="button" class="button-danger" id="confirmDeleteAccountBtn" disabled>Excluir conta</button>
      </div>
    </div>
  </div>

  <script>
    window.SUPABASE_URL = 'https://heywyqtihsajvkeydubr.supabase.co';
    window.SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhleXd5cXRpaHNhanZrZXlkdWJyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA4NjIwOTYsImV4cCI6MjA4NjQzODA5Nn0.zxHdGVyTlHC1laqjyvEDkKrCNL-yuTpu0LcaQUa9wrQ';
  </script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="js/exercicios.js" defer></script>
  <script src="js/util.js" defer></script>
  <script src="js/lz-string.js" defer></script>
  <script src="js/pdf-lib.min.js" defer></script>
  <script src="js/chart.umd.min.js" defer></script>
  <script src="js/fontkit.umd.min.js" defer></script>
  <script src="js/aiGenerator.js" defer></script>
  <script src="js/pdfExport.js" defer></script>
  <script src="js/exportBtn.js"></script>
  <script src="js/script.js" defer></script>
</body>

</html>
